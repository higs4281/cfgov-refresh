<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: modules/jquery/cf_formValidator.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: modules/jquery/cf_formValidator.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/* ==========================================================================
   jquery.cf_formValidator
   ========================================================================== */

'use strict';

var $ = require( 'jquery' );
var _validate = require( 'validate' );
var standardType = require( '../util/standard-type' );

var _validator = {
  defaults: {
    inputs: [
      'input[type!="hidden"]:enabled',
      'textarea:enabled',
      'select:enabled'
    ],
    types: [
      'required',
      'email',
      'checkgroup',
      'radiogroup'
    ],
    onFailure: standardType.noopFunct,
    onSuccess: standardType.noopFunct
  },

  /**
   * Checks whether the passed input should be skipped
   * for the passed test type.
   * @param   {object}  elem The input we're testing.
   * @param   {string}  type The test type we're checking for.
   * @returns {boolean}      Whether this input should be tested for the type.
   */
  _skipType: function( elem, type ) {
    var typeAttr = elem.attr( 'type' );
    var skips = {
      required:   !elem.prop( 'required' ),
      email:      typeAttr !== 'email',
      radiogroup: typeAttr !== 'radio',
      checkgroup: typeAttr !== 'checkbox'
    };
    return skips[type];
  },

  /**
   * Validate an individual input for each of the set types.
   * @param   {object} elem The jQuery object of the input.
   * @returns {object}      The status of each of the tested types.
  */
  _validateTypes: function( elem ) {
    var status = {};
    var value = elem.val();
    var validation = {
      required: _validate.single( value, { presence: true } ),
      email:    _validate.single( value, { email: true } )
    };

    $.each( _validator.settings.types, function( key, val ) {
      if ( _validator._skipType( elem, val ) ) {
        status[val] = null;
      } else {
        status[val] = typeof validation[val] === 'undefined';
      }
    } );

    return status;
  },

  /**
   * @param   {object} elem The input we're testing.
   * @returns {object}      The formatted validation object
   *                        of the tested input.
   */
  _validateInput: function( elem ) {
    return {
      elem:   elem,
      value:  elem.val(),
      label:  $.trim( $( 'label[for="' + elem.attr( 'id' ) + '"]' ).text() ),
      status: _validator._validateTypes( elem )
    };
  },

  /**
   * @param   {object} elem The check group we're testing.
   * @returns {object}      The formatted validation object
   *                        of the tested check group.
   */
  _validateCheckGroup: function( elem ) {
    return {
      elem:   elem,
      value:  null,
      label:  $.trim( elem.find( '.form-label-header' ).text() ),
      status: {
        checkgroup: elem.find( 'input:checked' ).length > 0
      }
    };
  },

  /**
   * Validate the fields of our form.
   * @param   {object} fields  The list of input fields we're testing.
   * @returns {object}         The tested list of fields broken into valid
   *                           and invalid blocks.
  */
  _validateFields: function( fields ) {
    var checkgroups = {};
    var validatedFields = {
      valid:   [],
      invalid: []
    };

    fields.each( function() {
      var $input = $( this );
      var failed = false;
      var field;

      // If it's a button elem or type is button or submit, skip it.
      if ( $input.is( 'button, :button, :submit' ) ) {
        return;
      // If it's a checkbox test the entire check group.
      } else if ( $input.is( ':checkbox' ) ) {
        var name = $input.attr( 'name' );
        var $group = $input.closest( '.form-group' );
        if ( checkgroups[name] || !$group.hasClass( 'required-check-group' ) ) {
          return;
        }
        field = _validator._validateCheckGroup( $group );
        checkgroups[name] = true;
      } else {
        field = _validator._validateInput( $input );
      }

      for ( var prop in field.status ) {
        if ( field.status[prop] === false ) {
          failed = true;
        }
      }

      if ( failed ) {
        validatedFields.invalid.push( field );
      } else {
        validatedFields.valid.push( field );
      }
    } );

    return validatedFields;
  },

  // Listen for cf_formValidator submit event.
  _initSubmitListener: function() {
    _validator.elem.on( 'submit.cf_formValidator', function( event ) {
      var $submitted = $( this );
      var fields = $submitted.find( _validator.settings.inputs.toString() );
      var validatedFields = _validator._validateFields( fields );

      if ( validatedFields.invalid.length &amp;&amp; _validator.settings.onFailure ) {
        _validator.settings.onFailure.call( this, event, validatedFields );
      } else if ( _validator.settings.onSuccess ) {
        _validator.settings.onSuccess.call( this, event, validatedFields );
      }
    } );
  },

  // Remove cf_formValidator submit listeners.
  _rmSubmitListener: function() {
    _validator.elem.off( 'submit.cf_formValidator' );
  },

  init: function( options ) {
    return this.each( function() {
      _validator.elem = $( this );
      _validator.settings = $.extend( {}, _validator.defaults, options );
      _validator._initSubmitListener();
    } );
  },

  destroy: function() {
    return this.each( function() {
      _validator._rmSubmitListener();

      _validator.settings = [];
    } );
  }
};

/**
 * Initializes CF form validator jquery plugin.
*/
function init() {
  $.fn.cf_formValidator = function() {
    var options;
    var method = arguments[0];

    if ( _validator[method] ) {
      method = _validator[method];
      options = Array.prototype.slice.call( arguments, 1 );
    } else if ( typeof method === 'object' || !method ) {
      method = _validator.init;
      options = arguments;
    } else {
      $.error(
        'Method "' + method + '" does not exist in the cf_formValidator plugin'
      );
      return this;
    }

    return method.apply( this, options );
  };
}

module.exports = { init: init };
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="AlphaTransition.html">AlphaTransition</a></li><li><a href="BaseTransition.html">BaseTransition</a></li><li><a href="BreakpointHandler.html">BreakpointHandler</a></li><li><a href="ClearableInput.html">ClearableInput</a></li><li><a href="ContentSlider.html">ContentSlider</a></li><li><a href="EventObserver.html">EventObserver</a></li><li><a href="Expandable.html">Expandable</a></li><li><a href="ExpandableGroup.html">ExpandableGroup</a></li><li><a href="ExternalSite.html">ExternalSite</a></li><li><a href="FilterableListControls.html">FilterableListControls</a></li><li><a href="FlyoutMenu.html">FlyoutMenu</a></li><li><a href="Footer.html">Footer</a></li><li><a href="GlobalBanner.html">GlobalBanner</a></li><li><a href="GlobalSearch.html">GlobalSearch</a></li><li><a href="Header.html">Header</a></li><li><a href="MegaMenu.html">MegaMenu</a></li><li><a href="MegaMenuDesktop.html">MegaMenuDesktop</a></li><li><a href="MegaMenuMobile.html">MegaMenuMobile</a></li><li><a href="MobileCarousel.html">MobileCarousel</a></li><li><a href="MoveTransition.html">MoveTransition</a></li><li><a href="Multiselect.html">Multiselect</a></li><li><a href="Notification.html">Notification</a></li><li><a href="SecondaryNavigation.html">SecondaryNavigation</a></li><li><a href="Tree.html">Tree</a></li><li><a href="TreeNode.html">TreeNode</a></li><li><a href="UStreamPlayer.html">UStreamPlayer</a></li><li><a href="VideoPlayer.html">VideoPlayer</a></li><li><a href="YoutubePlayer.html">YoutubePlayer</a></li></ul><h3>Global</h3><ul><li><a href="global.html#_attachIFrame">_attachIFrame</a></li><li><a href="global.html#_calculateCollapseDuration">_calculateCollapseDuration</a></li><li><a href="global.html#_calculateExpandDuration">_calculateExpandDuration</a></li><li><a href="global.html#_checkableInput">_checkableInput</a></li><li><a href="global.html#_clearError">_clearError</a></li><li><a href="global.html#_constrainValue">_constrainValue</a></li><li><a href="global.html#_createElement">_createElement</a></li><li><a href="global.html#_createMessage">_createMessage</a></li><li><a href="global.html#_ensureElement">_ensureElement</a></li><li><a href="global.html#_findElements">_findElements</a></li><li><a href="global.html#_getMatchesMethod">_getMatchesMethod</a></li><li><a href="global.html#_getStorageType">_getStorageType</a></li><li><a href="global.html#_getTransitionEndEvent">_getTransitionEndEvent</a></li><li><a href="global.html#_getTransitionPrefix">_getTransitionPrefix</a></li><li><a href="global.html#_inBreakpointRange">_inBreakpointRange</a></li><li><a href="global.html#_init">_init</a></li><li><a href="global.html#_initEvents">_initEvents</a></li><li><a href="global.html#_isPlainObject">_isPlainObject</a></li><li><a href="global.html#_navSecondaryToggle">_navSecondaryToggle</a></li><li><a href="global.html#_navSecondaryToggleTest">_navSecondaryToggleTest</a></li><li><a href="global.html#_onAction">_onAction</a></li><li><a href="global.html#_scrollToTop">_scrollToTop</a></li><li><a href="global.html#_sendError">_sendError</a></li><li><a href="global.html#_sendSubscriptionRequest">_sendSubscriptionRequest</a></li><li><a href="global.html#_setChildElements">_setChildElements</a></li><li><a href="global.html#_tableClicked">_tableClicked</a></li><li><a href="global.html#_toCamelCase">_toCamelCase</a></li><li><a href="global.html#_verifyClassExists">_verifyClassExists</a></li><li><a href="global.html#_verifyElementExists">_verifyElementExists</a></li><li><a href="global.html#add">add</a></li><li><a href="global.html#assign">assign</a></li><li><a href="global.html#attach">attach</a></li><li><a href="global.html#backtrack">backtrack</a></li><li><a href="global.html#BEHAVIOR_PREFIX">BEHAVIOR_PREFIX</a></li><li><a href="global.html#bfs">bfs</a></li><li><a href="global.html#bindEvent">bindEvent</a></li><li><a href="global.html#checkBehaviorDom">checkBehaviorDom</a></li><li><a href="global.html#checkbox">checkbox</a></li><li><a href="global.html#checkDom">checkDom</a></li><li><a href="global.html#closest">closest</a></li><li><a href="global.html#contains">contains</a></li><li><a href="global.html#create">create</a></li><li><a href="global.html#dataSet">dataSet</a></li><li><a href="global.html#date">date</a></li><li><a href="global.html#destroyInitFlag">destroyInitFlag</a></li><li><a href="global.html#dfs">dfs</a></li><li><a href="global.html#email">email</a></li><li><a href="global.html#empty">empty</a></li><li><a href="global.html#find">find</a></li><li><a href="global.html#get">get</a></li><li><a href="global.html#getItem">getItem</a></li><li><a href="global.html#getSiblings">getSiblings</a></li><li><a href="global.html#getViewportDimensions">getViewportDimensions</a></li><li><a href="global.html#handleViewportChange">handleViewportChange</a></li><li><a href="global.html#indexOfObject">indexOfObject</a></li><li><a href="global.html#init">init</a></li><li><a href="global.html#INIT_FLAG">INIT_FLAG</a></li><li><a href="global.html#instantiateAll">instantiateAll</a></li><li><a href="global.html#isArray">isArray</a></li><li><a href="global.html#isDate">isDate</a></li><li><a href="global.html#isDefined">isDefined</a></li><li><a href="global.html#isEmpty">isEmpty</a></li><li><a href="global.html#isFunction">isFunction</a></li><li><a href="global.html#isInDesktop">isInDesktop</a></li><li><a href="global.html#isNumber">isNumber</a></li><li><a href="global.html#isObject">isObject</a></li><li><a href="global.html#isOneExpanded">isOneExpanded</a></li><li><a href="global.html#isString">isString</a></li><li><a href="global.html#isThisExpanded">isThisExpanded</a></li><li><a href="global.html#isUndefined">isUndefined</a></li><li><a href="global.html#JS_HOOK">JS_HOOK</a></li><li><a href="global.html#loadScript">loadScript</a></li><li><a href="global.html#noopFunct">noopFunct</a></li><li><a href="global.html#not">not</a></li><li><a href="global.html#queryOne">queryOne</a></li><li><a href="global.html#radio">radio</a></li><li><a href="global.html#remove">remove</a></li><li><a href="global.html#removeItem">removeItem</a></li><li><a href="global.html#sendEvent">sendEvent</a></li><li><a href="global.html#sendEvents">sendEvents</a></li><li><a href="global.html#setInitFlag">setInitFlag</a></li><li><a href="global.html#setItem">setItem</a></li><li><a href="global.html#setStorage">setStorage</a></li><li><a href="global.html#STATE_PREFIX">STATE_PREFIX</a></li><li><a href="global.html#stringEscape">stringEscape</a></li><li><a href="global.html#stringMatch">stringMatch</a></li><li><a href="global.html#stringValid">stringValid</a></li><li><a href="global.html#testBreakpoint">testBreakpoint</a></li><li><a href="global.html#toggleExpandedState">toggleExpandedState</a></li><li><a href="global.html#watchWindowResize">watchWindowResize</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.2</a> on Wed Nov 02 2016 08:33:37 GMT-0400 (EDT)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
