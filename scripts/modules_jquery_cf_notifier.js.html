<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: modules/jquery/cf_notifier.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: modules/jquery/cf_notifier.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/* ==========================================================================
   jquery.cf_notifier
   ========================================================================== */

'use strict';

var $ = require( 'jquery' );
var _notifierTemplate = '&lt;div class="m-notification ' +
                                    'm-notification__{{ state }}" ' +
                             'style="display: none;">' +
                          '&lt;span class="m-notification_icon cf-icon">&lt;/span>' +
                          '&lt;div class="m-notification_content">' +
                              '&lt;p class="h4 m-notification_message">' +
                                '{{ message }}' +
                              '&lt;/p>' +
                          '&lt;/div>' +
                        '&lt;/div>';

var _notifier = {
  defaults: {
    message:        'There was an error with your submission',
    state:          'error',
    duration:       200,
    easing:         'swing',
    template:       _notifierTemplate,
    insertLocation: 'prependTo',
    insertTarget:   null,
    input:          null,
    onRender:       null,
    onClearAll:     null,
    onDestroy:      null
  },

  existing: false,

  /**
   * Generate a string of HTML from the plugin's settings
   * @returns {string} The expanded HTML string
  */
  _generateHTML: function() {
    var settings = _notifier.settings;
    var icon = {
      error:   'delete',
      success: 'approved',
      warning: 'error'
    };
    var data = {
      message: settings.message,
      state:   settings.state,
      icon:    icon[settings.state]
    };
    var template = settings.template.replace( /\{\{\s?(.*?)\s?\}\}/g,
      function( match, token ) {
        return data[token] || '';
      }
    );

    return template;
  },

  // Clear any previously created notifications
  _clearExisting: function( callback ) {
    var settings = _notifier.settings;
    $( _notifier.existing ).slideUp( {
      duration: settings.duration,
      easing:   settings.easing,
      complete: function() {
        $( this ).remove();
        _notifier.existing = false;
        if ( callback ) {
          return callback();
        }
        return null;
      }
    } );
  },

  // Create a notification
  _notify: function( elem ) {
    var settings = _notifier.settings;
    var html = _notifier._generateHTML();
    $( html )[settings.insertLocation]( elem )
      .slideDown( {
        duration: settings.duration,
        easing:   settings.easing,
        complete: function() {
          _notifier.existing = this;
          if ( settings.onRender ) {
            settings.onRender.call( this );
          }
        }
      } );
  },

  // Listen for custom cf_notifier:notify event
  _initNotifyListener: function() {
    _notifier.elem.on( 'cf_notifier:notify', function( event, options ) {
      _notifier.settings = $.extend( {}, _notifier.settings, options );
      var $target = _notifier.settings.insertTarget || $( this );
      if ( _notifier.existing ) {
        _notifier._clearExisting( function() {
          _notifier._notify( $target );
        } );
      } else {
        _notifier._notify( $target );
      }
    } );
  },

  // Listen for custom cf_notifier:clear event
  _initClearListener: function() {
    _notifier.elem.on( 'cf_notifier:clear', function( event, options ) {
      _notifier.settings = $.extend( {}, _notifier.settings, options );
      if ( _notifier.existing ) {
        _notifier._clearExisting( function() {
          if ( _notifier.settings.onClearAll ) {
            _notifier.settings.onClearAll.call( this );
          }
        } );
      } else if ( _notifier.settings.onClearAll ) {
        _notifier.settings.onClearAll.call( this );
      }
    } );
  },

  // Remove all custom cf_notifier event listeners
  _rmCFNotifierListeners: function() {
    _notifier.elem.off( 'cf_notifier' );
  },

  init: function( options ) {
    return this.each( function() {
      _notifier.elem = $( this );
      _notifier.settings = $.extend( {}, _notifier.defaults, options );

      if ( _notifier.elem.length > 0 ) {
        _notifier._initNotifyListener();
        _notifier._initClearListener();
      }
    } );
  },

  destroy: function() {
    return this.each( function() {
      _notifier._rmCFNotifierListeners();

      if ( _notifier.existing ) {
        _notifier._clearExisting( function() {
          if ( _notifier.settings.onDestroy ) {
            _notifier.settings.onDestroy.call( this );
          }
          _notifier.settings = [];
        } );
      } else {
        if ( _notifier.settings.onDestroy ) {
          _notifier.settings.onDestroy.call( this );
        }
        _notifier.settings = [];
      }
    } );
  }
};

/**
 * Initializes CF notification jquery plugin.
*/
function init() {
  $.fn.cf_notifier = function() {
    var options;
    var method = arguments[0];

    if ( _notifier[method] ) {
      method = _notifier[method];
      options = Array.prototype.slice.call( arguments, 1 );
    } else if ( typeof method === 'object' || !method ) {
      method = _notifier.init;
      options = arguments;
    } else {
      $.error(
        'Method "' + method + '"" does not exist in the cf__notifier plugin'
      );
      return this;
    }

    return method.apply( this, options );
  };
}

module.exports = { init: init };
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="AlphaTransition.html">AlphaTransition</a></li><li><a href="BaseTransition.html">BaseTransition</a></li><li><a href="BreakpointHandler.html">BreakpointHandler</a></li><li><a href="ClearableInput.html">ClearableInput</a></li><li><a href="ContentSlider.html">ContentSlider</a></li><li><a href="EventObserver.html">EventObserver</a></li><li><a href="Expandable.html">Expandable</a></li><li><a href="ExpandableGroup.html">ExpandableGroup</a></li><li><a href="ExternalSite.html">ExternalSite</a></li><li><a href="FilterableListControls.html">FilterableListControls</a></li><li><a href="FlyoutMenu.html">FlyoutMenu</a></li><li><a href="Footer.html">Footer</a></li><li><a href="GlobalBanner.html">GlobalBanner</a></li><li><a href="GlobalSearch.html">GlobalSearch</a></li><li><a href="Header.html">Header</a></li><li><a href="MegaMenu.html">MegaMenu</a></li><li><a href="MegaMenuDesktop.html">MegaMenuDesktop</a></li><li><a href="MegaMenuMobile.html">MegaMenuMobile</a></li><li><a href="MobileCarousel.html">MobileCarousel</a></li><li><a href="MoveTransition.html">MoveTransition</a></li><li><a href="Multiselect.html">Multiselect</a></li><li><a href="Notification.html">Notification</a></li><li><a href="SecondaryNavigation.html">SecondaryNavigation</a></li><li><a href="Tree.html">Tree</a></li><li><a href="TreeNode.html">TreeNode</a></li><li><a href="UStreamPlayer.html">UStreamPlayer</a></li><li><a href="VideoPlayer.html">VideoPlayer</a></li><li><a href="YoutubePlayer.html">YoutubePlayer</a></li></ul><h3>Global</h3><ul><li><a href="global.html#_attachIFrame">_attachIFrame</a></li><li><a href="global.html#_calculateCollapseDuration">_calculateCollapseDuration</a></li><li><a href="global.html#_calculateExpandDuration">_calculateExpandDuration</a></li><li><a href="global.html#_checkableInput">_checkableInput</a></li><li><a href="global.html#_clearError">_clearError</a></li><li><a href="global.html#_constrainValue">_constrainValue</a></li><li><a href="global.html#_createElement">_createElement</a></li><li><a href="global.html#_createMessage">_createMessage</a></li><li><a href="global.html#_ensureElement">_ensureElement</a></li><li><a href="global.html#_findElements">_findElements</a></li><li><a href="global.html#_getMatchesMethod">_getMatchesMethod</a></li><li><a href="global.html#_getStorageType">_getStorageType</a></li><li><a href="global.html#_getTransitionEndEvent">_getTransitionEndEvent</a></li><li><a href="global.html#_getTransitionPrefix">_getTransitionPrefix</a></li><li><a href="global.html#_inBreakpointRange">_inBreakpointRange</a></li><li><a href="global.html#_init">_init</a></li><li><a href="global.html#_initEvents">_initEvents</a></li><li><a href="global.html#_isPlainObject">_isPlainObject</a></li><li><a href="global.html#_navSecondaryToggle">_navSecondaryToggle</a></li><li><a href="global.html#_navSecondaryToggleTest">_navSecondaryToggleTest</a></li><li><a href="global.html#_onAction">_onAction</a></li><li><a href="global.html#_scrollToTop">_scrollToTop</a></li><li><a href="global.html#_sendError">_sendError</a></li><li><a href="global.html#_sendSubscriptionRequest">_sendSubscriptionRequest</a></li><li><a href="global.html#_setChildElements">_setChildElements</a></li><li><a href="global.html#_tableClicked">_tableClicked</a></li><li><a href="global.html#_toCamelCase">_toCamelCase</a></li><li><a href="global.html#_verifyClassExists">_verifyClassExists</a></li><li><a href="global.html#_verifyElementExists">_verifyElementExists</a></li><li><a href="global.html#add">add</a></li><li><a href="global.html#assign">assign</a></li><li><a href="global.html#attach">attach</a></li><li><a href="global.html#backtrack">backtrack</a></li><li><a href="global.html#BEHAVIOR_PREFIX">BEHAVIOR_PREFIX</a></li><li><a href="global.html#bfs">bfs</a></li><li><a href="global.html#bindEvent">bindEvent</a></li><li><a href="global.html#checkBehaviorDom">checkBehaviorDom</a></li><li><a href="global.html#checkbox">checkbox</a></li><li><a href="global.html#checkDom">checkDom</a></li><li><a href="global.html#closest">closest</a></li><li><a href="global.html#contains">contains</a></li><li><a href="global.html#create">create</a></li><li><a href="global.html#dataSet">dataSet</a></li><li><a href="global.html#date">date</a></li><li><a href="global.html#destroyInitFlag">destroyInitFlag</a></li><li><a href="global.html#dfs">dfs</a></li><li><a href="global.html#email">email</a></li><li><a href="global.html#empty">empty</a></li><li><a href="global.html#find">find</a></li><li><a href="global.html#get">get</a></li><li><a href="global.html#getItem">getItem</a></li><li><a href="global.html#getSiblings">getSiblings</a></li><li><a href="global.html#getViewportDimensions">getViewportDimensions</a></li><li><a href="global.html#handleViewportChange">handleViewportChange</a></li><li><a href="global.html#indexOfObject">indexOfObject</a></li><li><a href="global.html#init">init</a></li><li><a href="global.html#INIT_FLAG">INIT_FLAG</a></li><li><a href="global.html#instantiateAll">instantiateAll</a></li><li><a href="global.html#isArray">isArray</a></li><li><a href="global.html#isDate">isDate</a></li><li><a href="global.html#isDefined">isDefined</a></li><li><a href="global.html#isEmpty">isEmpty</a></li><li><a href="global.html#isFunction">isFunction</a></li><li><a href="global.html#isInDesktop">isInDesktop</a></li><li><a href="global.html#isNumber">isNumber</a></li><li><a href="global.html#isObject">isObject</a></li><li><a href="global.html#isOneExpanded">isOneExpanded</a></li><li><a href="global.html#isString">isString</a></li><li><a href="global.html#isThisExpanded">isThisExpanded</a></li><li><a href="global.html#isUndefined">isUndefined</a></li><li><a href="global.html#JS_HOOK">JS_HOOK</a></li><li><a href="global.html#loadScript">loadScript</a></li><li><a href="global.html#noopFunct">noopFunct</a></li><li><a href="global.html#not">not</a></li><li><a href="global.html#queryOne">queryOne</a></li><li><a href="global.html#radio">radio</a></li><li><a href="global.html#remove">remove</a></li><li><a href="global.html#removeItem">removeItem</a></li><li><a href="global.html#sendEvent">sendEvent</a></li><li><a href="global.html#sendEvents">sendEvents</a></li><li><a href="global.html#setInitFlag">setInitFlag</a></li><li><a href="global.html#setItem">setItem</a></li><li><a href="global.html#setStorage">setStorage</a></li><li><a href="global.html#STATE_PREFIX">STATE_PREFIX</a></li><li><a href="global.html#stringEscape">stringEscape</a></li><li><a href="global.html#stringMatch">stringMatch</a></li><li><a href="global.html#stringValid">stringValid</a></li><li><a href="global.html#testBreakpoint">testBreakpoint</a></li><li><a href="global.html#toggleExpandedState">toggleExpandedState</a></li><li><a href="global.html#watchWindowResize">watchWindowResize</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.2</a> on Wed Nov 02 2016 08:33:37 GMT-0400 (EDT)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
